<!DOCTYPE html>
<html>

<head>
    <base href="$FLUTTER_BASE_HREF">

    <meta charset="UTF-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="description" content="Utopic Portfolio">

    <title>Utopic Portfolio</title>

    <!-- iOS meta tags & icons -->
    <link rel="icon" href="/favicon.ico" sizes="48x48">
    <link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml">
    <link rel="apple-touch-icon" href="icons/apple-touch-icon.png" />
    <link rel="mask-icon" href="icons/safari-pinned-tab.svg" color="#000000">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Utopic Portfolio">

    <link rel="manifest" href="manifest.json">

    <script>
        // The value below is injected by flutter build, do not touch.
        var serviceWorkerVersion = null;
    </script>
    <!-- This script adds the flutter initialization JS code -->
    <script src="flutter.js" defer></script>
</head>

<body>
    <!-- Background -->
    <style>
        body {
            background-color: #333333;
        }
    </style>
    <style>
        body.light {
            background-color: #fdf8ff;
        }

        body.dark {
            background-color: #261e35;
        }
    </style>
    <script>
        var queryParams = new URLSearchParams(window.location.search);

        // Set the theme from the URL param, with fallback to user preference if no theme is
        // specified.
        var theme = queryParams.get("brightness");
        theme ||= window.matchMedia("(prefers-color-scheme: dark)").matches
            ? "dark"
            : "light";
        document.body.classList.add(theme);
    </script>
    <!-- Loading indicator -->
    <div id="loading">
        <style>
            body {
                inset: 0;
                overflow: hidden;
                margin: 0;
                padding: 0;
                position: fixed;
            }

            #loading {
                align-items: center;
                display: flex;
                height: 100%;
                justify-content: center;
                width: 100%;
            }

            #loading img {
                animation: 1s ease-in-out 0s infinite alternate breathe;
                opacity: .66;
                transition: opacity .4s;
            }

            #loading.main_done img {
                opacity: 1;
            }

            #loading.init_done img {
                animation: .33s ease-in-out 0s 1 forwards zooooom;
                opacity: .05;
            }

            @keyframes breathe {
                from {
                    transform: scale(1)
                }

                to {
                    transform: scale(0.95)
                }
            }

            @keyframes zooooom {
                from {
                    transform: scale(1)
                }

                to {
                    transform: scale(0)
                }
            }
        </style>
        <img src="/favicon.svg" alt="Loading indicator..." width="128" height="128" />
    </div>
    <script>
        window.addEventListener('load', function (ev) {
            var loading = document.querySelector('#loading');
            // Download main.dart.js
            _flutter.loader.loadEntrypoint().then(function (engineInitializer) {
                loading.classList.add('main_done');
                return engineInitializer.initializeEngine();
            }).then(function (appRunner) {
                loading.classList.add('init_done');
                return appRunner.runApp();
            }).then(function (app) {
                // Wait a few milliseconds so users can see the "zoooom" animation
                // before getting rid of the "loading" div.
                window.setTimeout(function () {
                    loading.remove();
                }, 100);
            });
        });
    </script>
</body>

</html>
